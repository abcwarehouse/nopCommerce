@model NewsletterBoxModel
<form id="marketingForm" novalidate>
  <input type="email" id="email" name="email" placeholder="Email Address" required />
  <input type="tel" id="phoneNumber" name="PhoneNumber" class="form-control" placeholder="Phone Number" required />
  <button type="submit">Subscribe</button>
</form>

<script>
  document.getElementById("marketingForm").addEventListener("submit", async function (e) {
    e.preventDefault();

    const email = document.getElementById("email").value.trim();
    const phone = document.getElementById("phone").value.trim();

    if (!email || !phone.match(/^\d{10}$/)) {
      alert("Please enter a valid email and phone number.");
      return;
    }

    const response = await fetch('/api/marketingSms/subscribe', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ emailAddress: email, phoneNumber: phone })
    });

    const result = await response.json();
    alert(result.message);
  });
</script>
