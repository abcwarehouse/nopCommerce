@model AbcWarehouse.Plugin.Misc.SearchSpring.Models.SearchSpringModel
@using Nop.Web.Models.Catalog
@using Nop.Web.Framework
@using Nop.Web.Framework.UI
@using Nop.Core
@using Nop.Core.Infrastructure
@using Nop.Plugin.Misc.AbcFrontend.Services
@using Nop.Web.Framework.Infrastructure
@using Nop.Plugin.Misc.AbcCore.Services

@inject FrontEndService frontEndService
@inject IStoreContext storeContext
@inject IWebHelper webHelper

@{
    // Dynamically get the current store's base URL
    var storeUrl = webHelper.GetStoreLocation(); // includes trailing slash
    var searchBaseUrl = $"{storeUrl}searchspring/results?q=";
}

<!-- Search Form -->
<div class="search-container">
    <form id="searchForm">
        <input type="text" id="searchInput" placeholder="Type to search..." autocomplete="off" />
        <button type="submit">Search</button>
    </form>
</div>

<!-- Optional: Could keep this if you want inline AJAX results -->
<div id="searchResults" class="search-container"></div>

<script>
    document.getElementById('searchForm').addEventListener('submit', function (event) {
        event.preventDefault();
        const query = document.getElementById('searchInput').value.trim();
        if (query) {
            const searchUrl = '@searchBaseUrl' + encodeURIComponent(query);
            window.location.href = searchUrl;
        }
    });
</script>
